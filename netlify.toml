[build]
  command = "npm run build"
  publish = ".next"

[functions]
  node_bundler = "esbuild"
  # Optimize function bundling - let Next.js plugin handle it

[[plugins]]
  package = "@netlify/plugin-nextjs"

[build.environment]
  NODE_VERSION = "18"
  # Optimize build performance
  NPM_FLAGS = "--prefer-offline --no-audit"

# Birthday email cron job - runs daily at 9:00 AM UTC
# Make sure to set CRON_SECRET environment variable in Netlify dashboard
[[cron]]
  path = "/api/admin/birthday/send"
  schedule = "0 9 * * *"

